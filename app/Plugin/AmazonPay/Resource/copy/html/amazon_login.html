<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery.blockUI/2.70/jquery.blockUI.min.js"></script>
    <script type="text/javascript">
        function getURLParameter(name, source) {
            return decodeURIComponent((new RegExp('[?|&|#]' + name + '=' + '([^&;]+?)(&|#|;|$)').exec(source) || [, ""])[1].replace(/\+/g, '%20')) || null;
        }

        $(document).ready(function () {
            if ($.blockUI != undefined) {
                var userAgent = window.navigator.userAgent;
                if ((userAgent.indexOf('iPhone') > 0 && userAgent.indexOf('iPad') == -1) || userAgent.indexOf('iPod') > 0 || userAgent.indexOf('Android') > 0) {
                // スマホ
                    $.blockUI({
                        message: $('#disp_loading'),
                        css :{
                            'width': '80%',
                            'margin': 'auto',
                            'padding': '20px 10px',
                            'border': 'none',
                            'border-radius': '15px',
                            '-webkit-border-radius': '15px',
                            '-moz-border-radius': '15px',
                            'font-family': 'Gothic Medium BBB',
                            'left': '10%',
                            'box-sizing': 'border-box'
                        }
                    });
                } else {
                    // PC
                    $.blockUI({
                        message: $('#disp_loading'),
                        css :{
                            'width': '500px',
                            'margin': '10px',
                            'padding': '10px',
                            'border': 'none',
                            'border-radius': '15px',
                            '-webkit-border-radius': '15px',
                            '-moz-border-radius': '15px',
                            'font-size': '80%',
                            'font-family': 'Gothic Medium BBB',
                            'left': 'calc((100% - 500px) / 2)',
                            'box-sizing': 'border-box'
                        }
                    });
                }
            }

            var regexp = RegExp('(/html/user_data)?/amazon_login.html.*$');
            var url = window.location.href;
            url = url.replace(regexp, '');

            var param = $(location).attr('hash').replace('#', '?');

            var state = param.substring(param.indexOf('state='));
            param = param.substring(0, param.indexOf('state')) + decodeURIComponent(state).replace('state=', '').replace(/,/g, '&');

            window.location.href = url + '/lwa/endpoint' + param;
        });
    </script>
</head>

<body>
    <div id="disp_loading" style="display:none;">
        <p>しばらくお待ち下さい。</p></br>
        <img src="//cdnjs.cloudflare.com/ajax/libs/galleriffic/2.0.1/css/loader.gif" width="40px"/></br>
    </div>
</body>

</html>
